<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1192px" preserveAspectRatio="none" style="width:777px;height:1192px;" version="1.1" viewBox="0 0 777 1192" width="777px" zoomAndPan="magnify"><defs><filter height="300%" id="fcw424kmjzotw" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="206" x="281" y="22.9951">OCPI Registration process</text><rect fill="#FFFFFF" filter="url(#fcw424kmjzotw)" height="49.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="56" y="335.6563"/><rect fill="#FFFFFF" filter="url(#fcw424kmjzotw)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="56" y="456.1875"/><rect fill="#FFFFFF" filter="url(#fcw424kmjzotw)" height="471.2578" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="56" y="613.8516"/><rect fill="#FFFFFF" filter="url(#fcw424kmjzotw)" height="819.8516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="414" y="335.6563"/><rect fill="#FFFFFF" filter="url(#fcw424kmjzotw)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="419" y="754.5156"/><rect fill="#FFFFFF" filter="url(#fcw424kmjzotw)" height="49.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="419" y="812.7813"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="61" x2="61" y1="68.5938" y2="223.2578"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="61" x2="61" y1="223.2578" y2="251.2578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="61" x2="61" y1="251.2578" y2="1180.5078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="419" x2="419" y1="68.5938" y2="223.2578"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="419" x2="419" y1="223.2578" y2="251.2578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="419" x2="419" y1="251.2578" y2="1180.5078"/><rect fill="#FEFECE" filter="url(#fcw424kmjzotw)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="8" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="15" y="53.292">PLATFORM 1</text><rect fill="#FEFECE" filter="url(#fcw424kmjzotw)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="366" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="373" y="53.292">PLATFORM 2</text><rect fill="#FFFFFF" filter="url(#fcw424kmjzotw)" height="49.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="56" y="335.6563"/><rect fill="#FFFFFF" filter="url(#fcw424kmjzotw)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="56" y="456.1875"/><rect fill="#FFFFFF" filter="url(#fcw424kmjzotw)" height="471.2578" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="56" y="613.8516"/><rect fill="#FFFFFF" filter="url(#fcw424kmjzotw)" height="819.8516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="414" y="335.6563"/><rect fill="#FFFFFF" filter="url(#fcw424kmjzotw)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="419" y="754.5156"/><rect fill="#FFFFFF" filter="url(#fcw424kmjzotw)" height="49.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="419" y="812.7813"/><rect fill="#EEEEEE" filter="url(#fcw424kmjzotw)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="762" x="3" y="99.1602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="765" y1="99.1602" y2="99.1602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="765" y1="102.1602" y2="102.1602"/><rect fill="#EEEEEE" filter="url(#fcw424kmjzotw)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="68" x="350" y="88.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="356" y="104.6606">Offline</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="61" x2="103" y1="142.8594" y2="142.8594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="103" x2="103" y1="142.8594" y2="155.8594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="62" x2="103" y1="155.8594" y2="155.8594"/><polygon fill="#A80036" points="72,151.8594,62,155.8594,72,159.8594,68,155.8594" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262" x="68" y="137.7935">Generate token: CREDENTIALS_TOKEN_A</text><polygon fill="#A80036" points="407,211.2578,417,215.2578,407,219.2578,411,215.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="61" x2="413" y1="215.2578" y2="215.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="68" y="179.9263">send information via e-mail</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="68" y="195.0591">(CREDENTIALS_TOKEN_A,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="285" x="104" y="210.1919">"https://company.com/ocpi/cpo/versions", ...)</text><rect fill="#EEEEEE" filter="url(#fcw424kmjzotw)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="762" x="3" y="271.8242"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="765" y1="271.8242" y2="271.8242"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="765" y1="274.8242" y2="274.8242"/><rect fill="#EEEEEE" filter="url(#fcw424kmjzotw)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="54" x="357" y="261.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="35" x="363" y="277.3247">OCPI</text><polygon fill="#A80036" points="77,331.6563,67,335.6563,77,339.6563,73,335.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="71" x2="413" y1="335.6563" y2="335.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="83" y="330.5903">GET /ocpi/cpo/versions</text><path d="M429,299.3906 L429,354.3906 L705,354.3906 L705,309.3906 L695,299.3906 L429,299.3906 " fill="#FBFB77" filter="url(#fcw424kmjzotw)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M695,299.3906 L695,309.3906 L705,309.3906 L695,299.3906 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="255" x="435" y="316.4575">The eMSP uses CREDENTIALS_TOKEN_A</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="241" x="435" y="331.5903">as authentication to fetch information</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="439" y="346.7231">from the CPO.</text><polygon fill="#A80036" points="402,380.9219,412,384.9219,402,388.9219,406,384.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="61" x2="408" y1="384.9219" y2="384.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="68" y="379.856">Available versions</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="424" x2="466" y1="414.0547" y2="414.0547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="466" y1="414.0547" y2="427.0547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="425" x2="466" y1="427.0547" y2="427.0547"/><polygon fill="#A80036" points="435,423.0547,425,427.0547,435,431.0547,431,427.0547" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="230" x="431" y="408.9888">Pick latest mutual version (e.g. 2.2).</text><polygon fill="#A80036" points="77,452.1875,67,456.1875,77,460.1875,73,456.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="71" x2="413" y1="456.1875" y2="456.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="83" y="451.1216">GET /ocpi/cpo/2.2/</text><polygon fill="#A80036" points="402,481.3203,412,485.3203,402,489.3203,406,485.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="61" x2="408" y1="485.3203" y2="485.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="68" y="480.2544">Available endpoints for v2.2</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="424" x2="466" y1="514.4531" y2="514.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="466" y1="514.4531" y2="527.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="425" x2="466" y1="527.4531" y2="527.4531"/><polygon fill="#A80036" points="435,523.4531,425,527.4531,435,531.4531,431,527.4531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="431" y="509.3872">Store version and endpoints</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="424" x2="466" y1="556.5859" y2="556.5859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="466" y1="556.5859" y2="569.5859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="425" x2="466" y1="569.5859" y2="569.5859"/><polygon fill="#A80036" points="435,565.5859,425,569.5859,435,573.5859,431,569.5859" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262" x="431" y="551.52">Generate token: CREDENTIALS_TOKEN_B</text><polygon fill="#A80036" points="77,609.8516,67,613.8516,77,617.8516,73,613.8516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="71" x2="413" y1="613.8516" y2="613.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="83" y="593.6528">POST /ocpi/cpo/2.2/credentials</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="329" x="83" y="608.7856">("/ocpi/emsp/versions", CREDENTIALS_TOKEN_B, ...)</text><path d="M10,626.8516 L10,681.8516 L469,681.8516 L469,636.8516 L459,626.8516 L10,626.8516 " fill="#FBFB77" filter="url(#fcw424kmjzotw)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M459,626.8516 L459,636.8516 L469,636.8516 L459,626.8516 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="353" x="32" y="643.9185">The CPO does not directly respond to the POST request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="364" x="32" y="659.0513">The CPO first needs to retrieve the versions en endpoints</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="402" x="32" y="674.1841">from the eMSP before responding with CREDENTIALS_TOKEN_C</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="66" x2="108" y1="712.3828" y2="712.3828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="108" x2="108" y1="712.3828" y2="725.3828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="67" x2="108" y1="725.3828" y2="725.3828"/><polygon fill="#A80036" points="77,721.3828,67,725.3828,77,729.3828,73,725.3828" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="73" y="707.3169">Store CREDENTIALS_TOKEN_B</text><polygon fill="#A80036" points="407,750.5156,417,754.5156,407,758.5156,411,754.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66" x2="413" y1="754.5156" y2="754.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="73" y="749.4497">GET /ocpi/emsp/versions</text><polygon fill="#A80036" points="77,779.6484,67,783.6484,77,787.6484,73,783.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71" x2="413" y1="783.6484" y2="783.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="83" y="778.5825">Available versions</text><polygon fill="#A80036" points="407,808.7813,417,812.7813,407,816.7813,411,812.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66" x2="413" y1="812.7813" y2="812.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="73" y="807.7153">GET /ocpi/emsp/2.2/</text><polygon fill="#A80036" points="77,858.0469,67,862.0469,77,866.0469,73,862.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="71" x2="413" y1="862.0469" y2="862.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="83" y="856.981">Available endpoints for v2.2</text><path d="M434,825.7813 L434,880.7813 L739,880.7813 L739,835.7813 L729,825.7813 L434,825.7813 " fill="#FBFB77" filter="url(#fcw424kmjzotw)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M729,825.7813 L729,835.7813 L739,835.7813 L729,825.7813 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="440" y="842.8481">The CPO knows it's version 2.2 because</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="284" x="440" y="857.981">of the endpoint the eMSP has used. The URL</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="440" y="873.1138">is retrieved from the available versions.</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="66" x2="108" y1="911.3125" y2="911.3125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="108" x2="108" y1="911.3125" y2="924.3125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="67" x2="108" y1="924.3125" y2="924.3125"/><polygon fill="#A80036" points="77,920.3125,67,924.3125,77,928.3125,73,924.3125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="73" y="906.2466">Store version and endpoints</text><path d="M10,937.3125 L10,992.3125 L469,992.3125 L469,947.3125 L459,937.3125 L10,937.3125 " fill="#FBFB77" filter="url(#fcw424kmjzotw)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M459,937.3125 L459,947.3125 L469,947.3125 L459,937.3125 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="359" x="51.5" y="954.3794">The CPO generates CREDENTIALS_TOKEN_C and returns</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="354" x="51.5" y="969.5122">it in the response to the HTTP POST credentials request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="51.5" y="984.645">from the MSP above.</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="66" x2="108" y1="1022.8438" y2="1022.8438"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="108" x2="108" y1="1022.8438" y2="1035.8438"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="67" x2="108" y1="1035.8438" y2="1035.8438"/><polygon fill="#A80036" points="77,1031.8438,67,1035.8438,77,1039.8438,73,1035.8438" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="73" y="1017.7778">Generate CREDENTIALS_TOKEN_C</text><polygon fill="#A80036" points="402,1081.1094,412,1085.1094,402,1089.1094,406,1085.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="61" x2="408" y1="1085.1094" y2="1085.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="320" x="68" y="1080.0435">Credentials with CREDENTIALS_TOKEN_C for eMSP</text><path d="M429,1048.8438 L429,1103.8438 L756,1103.8438 L756,1058.8438 L746,1048.8438 L429,1048.8438 " fill="#FBFB77" filter="url(#fcw424kmjzotw)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M746,1048.8438 L746,1058.8438 L756,1058.8438 L746,1048.8438 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="271" x="435" y="1065.9106">By returning new credentials for the eMSP,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="306" x="435" y="1081.0435">the initial setup token (CREDENTIALS_TOKEN_A)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="435" y="1096.1763">has now become invalid.</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="424" x2="466" y1="1154.5078" y2="1154.5078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="466" x2="466" y1="1154.5078" y2="1167.5078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="419" x2="466" y1="1167.5078" y2="1167.5078"/><polygon fill="#A80036" points="429,1163.5078,419,1167.5078,429,1171.5078,425,1167.5078" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="431" y="1134.3091">Store updated credentials with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="431" y="1149.4419">CREDENTIALS_TOKEN_C</text></g></svg>