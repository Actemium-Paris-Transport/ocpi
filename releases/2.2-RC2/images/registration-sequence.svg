<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1192px" preserveAspectRatio="none" style="width:758px;height:1192px;" version="1.1" viewBox="0 0 758 1192" width="758px" zoomAndPan="magnify"><defs><filter height="300%" id="f1xme2n6yikwj7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="206" x="271.5" y="22.9951">OCPI Registration process</text><rect fill="#FFFFFF" filter="url(#f1xme2n6yikwj7)" height="49.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="37" y="335.6563"/><rect fill="#FFFFFF" filter="url(#f1xme2n6yikwj7)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="37" y="456.1875"/><rect fill="#FFFFFF" filter="url(#f1xme2n6yikwj7)" height="471.2578" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="37" y="613.8516"/><rect fill="#FFFFFF" filter="url(#f1xme2n6yikwj7)" height="819.8516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="395" y="335.6563"/><rect fill="#FFFFFF" filter="url(#f1xme2n6yikwj7)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="400" y="754.5156"/><rect fill="#FFFFFF" filter="url(#f1xme2n6yikwj7)" height="49.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="400" y="812.7813"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="42" x2="42" y1="68.5938" y2="223.2578"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="42" x2="42" y1="223.2578" y2="251.2578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="42" x2="42" y1="251.2578" y2="1180.5078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="399.5" x2="399.5" y1="68.5938" y2="223.2578"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="399.5" x2="399.5" y1="223.2578" y2="251.2578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="399.5" x2="399.5" y1="251.2578" y2="1180.5078"/><rect fill="#FEFECE" filter="url(#f1xme2n6yikwj7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="44" x="18" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="25" y="53.292">CPO</text><rect fill="#FEFECE" filter="url(#f1xme2n6yikwj7)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="371.5" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="378.5" y="53.292">eMSP</text><rect fill="#FFFFFF" filter="url(#f1xme2n6yikwj7)" height="49.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="37" y="335.6563"/><rect fill="#FFFFFF" filter="url(#f1xme2n6yikwj7)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="37" y="456.1875"/><rect fill="#FFFFFF" filter="url(#f1xme2n6yikwj7)" height="471.2578" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="37" y="613.8516"/><rect fill="#FFFFFF" filter="url(#f1xme2n6yikwj7)" height="819.8516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="395" y="335.6563"/><rect fill="#FFFFFF" filter="url(#f1xme2n6yikwj7)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="400" y="754.5156"/><rect fill="#FFFFFF" filter="url(#f1xme2n6yikwj7)" height="49.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="400" y="812.7813"/><rect fill="#EEEEEE" filter="url(#f1xme2n6yikwj7)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="743" x="3" y="99.1602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="746" y1="99.1602" y2="99.1602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="746" y1="102.1602" y2="102.1602"/><rect fill="#EEEEEE" filter="url(#f1xme2n6yikwj7)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="68" x="340.5" y="88.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="346.5" y="104.6606">Offline</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="42" x2="84" y1="142.8594" y2="142.8594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="84" x2="84" y1="142.8594" y2="155.8594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="43" x2="84" y1="155.8594" y2="155.8594"/><polygon fill="#A80036" points="53,151.8594,43,155.8594,53,159.8594,49,155.8594" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262" x="49" y="137.7935">Generate token: CREDENTIALS_TOKEN_A</text><polygon fill="#A80036" points="388,211.2578,398,215.2578,388,219.2578,392,215.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="42" x2="394" y1="215.2578" y2="215.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="49" y="179.9263">send information via e-mail</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="49" y="195.0591">(CREDENTIALS_TOKEN_A,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="285" x="85" y="210.1919">"https://company.com/ocpi/cpo/versions", ...)</text><rect fill="#EEEEEE" filter="url(#f1xme2n6yikwj7)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="743" x="3" y="271.8242"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="746" y1="271.8242" y2="271.8242"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="746" y1="274.8242" y2="274.8242"/><rect fill="#EEEEEE" filter="url(#f1xme2n6yikwj7)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="54" x="347.5" y="261.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="35" x="353.5" y="277.3247">OCPI</text><polygon fill="#A80036" points="58,331.6563,48,335.6563,58,339.6563,54,335.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="52" x2="394" y1="335.6563" y2="335.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="64" y="330.5903">GET /ocpi/cpo/versions</text><path d="M410,299.3906 L410,354.3906 L686,354.3906 L686,309.3906 L676,299.3906 L410,299.3906 " fill="#FBFB77" filter="url(#f1xme2n6yikwj7)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M676,299.3906 L676,309.3906 L686,309.3906 L676,299.3906 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="255" x="416" y="316.4575">The eMSP uses CREDENTIALS_TOKEN_A</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="241" x="416" y="331.5903">as authentication to fetch information</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="420" y="346.7231">from the CPO.</text><polygon fill="#A80036" points="383,380.9219,393,384.9219,383,388.9219,387,384.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="42" x2="389" y1="384.9219" y2="384.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="49" y="379.856">Available versions</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="405" x2="447" y1="414.0547" y2="414.0547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="447" x2="447" y1="414.0547" y2="427.0547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="406" x2="447" y1="427.0547" y2="427.0547"/><polygon fill="#A80036" points="416,423.0547,406,427.0547,416,431.0547,412,427.0547" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="230" x="412" y="408.9888">Pick latest mutual version (e.g. 2.2).</text><polygon fill="#A80036" points="58,452.1875,48,456.1875,58,460.1875,54,456.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="52" x2="394" y1="456.1875" y2="456.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="64" y="451.1216">GET /ocpi/cpo/2.2/</text><polygon fill="#A80036" points="383,481.3203,393,485.3203,383,489.3203,387,485.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="42" x2="389" y1="485.3203" y2="485.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="49" y="480.2544">Available endpoints for v2.2</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="405" x2="447" y1="514.4531" y2="514.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="447" x2="447" y1="514.4531" y2="527.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="406" x2="447" y1="527.4531" y2="527.4531"/><polygon fill="#A80036" points="416,523.4531,406,527.4531,416,531.4531,412,527.4531" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="412" y="509.3872">Store version and endpoints</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="405" x2="447" y1="556.5859" y2="556.5859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="447" x2="447" y1="556.5859" y2="569.5859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="406" x2="447" y1="569.5859" y2="569.5859"/><polygon fill="#A80036" points="416,565.5859,406,569.5859,416,573.5859,412,569.5859" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262" x="412" y="551.52">Generate token: CREDENTIALS_TOKEN_B</text><polygon fill="#A80036" points="58,609.8516,48,613.8516,58,617.8516,54,613.8516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="52" x2="394" y1="613.8516" y2="613.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="64" y="593.6528">POST /ocpi/cpo/2.2/credentials</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="329" x="64" y="608.7856">("/ocpi/emsp/versions", CREDENTIALS_TOKEN_B, ...)</text><path d="M8,626.8516 L8,681.8516 L431,681.8516 L431,636.8516 L421,626.8516 L8,626.8516 " fill="#FBFB77" filter="url(#f1xme2n6yikwj7)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M421,626.8516 L421,636.8516 L431,636.8516 L421,626.8516 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="353" x="14" y="643.9185">The CPO does not directly respond to the POST request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="364" x="14" y="659.0513">The CPO first needs to retrieve the versions en endpoints</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="402" x="14" y="674.1841">from the eMSP before responding with CREDENTIALS_TOKEN_C</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="47" x2="89" y1="712.3828" y2="712.3828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89" x2="89" y1="712.3828" y2="725.3828"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="48" x2="89" y1="725.3828" y2="725.3828"/><polygon fill="#A80036" points="58,721.3828,48,725.3828,58,729.3828,54,725.3828" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="54" y="707.3169">Store CREDENTIALS_TOKEN_B</text><polygon fill="#A80036" points="388,750.5156,398,754.5156,388,758.5156,392,754.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="47" x2="394" y1="754.5156" y2="754.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="54" y="749.4497">GET /ocpi/emsp/versions</text><polygon fill="#A80036" points="58,779.6484,48,783.6484,58,787.6484,54,783.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="52" x2="394" y1="783.6484" y2="783.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="64" y="778.5825">Available versions</text><polygon fill="#A80036" points="388,808.7813,398,812.7813,388,816.7813,392,812.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="47" x2="394" y1="812.7813" y2="812.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="54" y="807.7153">GET /ocpi/emsp/2.2/</text><polygon fill="#A80036" points="58,858.0469,48,862.0469,58,866.0469,54,862.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="52" x2="394" y1="862.0469" y2="862.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="64" y="856.981">Available endpoints for v2.2</text><path d="M415,825.7813 L415,880.7813 L720,880.7813 L720,835.7813 L710,825.7813 L415,825.7813 " fill="#FBFB77" filter="url(#f1xme2n6yikwj7)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M710,825.7813 L710,835.7813 L720,835.7813 L710,825.7813 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="421" y="842.8481">The CPO knows it's version 2.2 because</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="284" x="421" y="857.981">of the endpoint the eMSP has used. The URL</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="421" y="873.1138">is retrieved from the available versions.</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="47" x2="89" y1="911.3125" y2="911.3125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89" x2="89" y1="911.3125" y2="924.3125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="48" x2="89" y1="924.3125" y2="924.3125"/><polygon fill="#A80036" points="58,920.3125,48,924.3125,58,928.3125,54,924.3125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="54" y="906.2466">Store version and endpoints</text><path d="M18,937.3125 L18,992.3125 L423,992.3125 L423,947.3125 L413,937.3125 L18,937.3125 " fill="#FBFB77" filter="url(#f1xme2n6yikwj7)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M413,937.3125 L413,947.3125 L423,947.3125 L413,937.3125 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="359" x="32.75" y="954.3794">The CPO generates CREDENTIALS_TOKEN_C and returns</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="354" x="32.75" y="969.5122">it in the response to the HTTP POST credentials request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="32.75" y="984.645">from the MSP above.</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="47" x2="89" y1="1022.8438" y2="1022.8438"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="89" x2="89" y1="1022.8438" y2="1035.8438"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="48" x2="89" y1="1035.8438" y2="1035.8438"/><polygon fill="#A80036" points="58,1031.8438,48,1035.8438,58,1039.8438,54,1035.8438" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="54" y="1017.7778">Generate CREDENTIALS_TOKEN_C</text><polygon fill="#A80036" points="383,1081.1094,393,1085.1094,383,1089.1094,387,1085.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="42" x2="389" y1="1085.1094" y2="1085.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="320" x="49" y="1080.0435">Credentials with CREDENTIALS_TOKEN_C for eMSP</text><path d="M410,1048.8438 L410,1103.8438 L737,1103.8438 L737,1058.8438 L727,1048.8438 L410,1048.8438 " fill="#FBFB77" filter="url(#f1xme2n6yikwj7)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M727,1048.8438 L727,1058.8438 L737,1058.8438 L727,1048.8438 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="271" x="416" y="1065.9106">By returning new credentials for the eMSP,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="306" x="416" y="1081.0435">the initial setup token (CREDENTIALS_TOKEN_A)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="416" y="1096.1763">has now become invalid.</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="405" x2="447" y1="1154.5078" y2="1154.5078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="447" x2="447" y1="1154.5078" y2="1167.5078"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="400" x2="447" y1="1167.5078" y2="1167.5078"/><polygon fill="#A80036" points="410,1163.5078,400,1167.5078,410,1171.5078,406,1167.5078" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="412" y="1134.3091">Store updated credentials with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="412" y="1149.4419">CREDENTIALS_TOKEN_C</text></g></svg>